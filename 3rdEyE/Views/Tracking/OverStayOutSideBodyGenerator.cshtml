@model IEnumerable<_3rdEyE.Models.Vehicle>

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        /*th, td {
            padding: 15px;
        }*/
    </style>
</head>
@{
    string ConvertToDateTimeString(DateTime? dateTime)
    {
        return String.Format("{0:dd/MM/yyyy H:mm}", dateTime);
    }
    var sl = 0;

    string GetTimeDiffrence_Minute(DateTime? dateTime)
    {
        var totalMinute = (long)(DateTime.Now - (dateTime ?? DateTime.Now)).TotalMinutes;
        var hour = (int)(totalMinute / 60);
        var minute = (int)(totalMinute % 60);
        return hour + " hour(s) " + minute + " minute(s)";
    }
}
<body style="width:70%;">

    <h2>@ViewBag.Message_1</h2>
    <p></p>

    <table>
        <tr>
            <th>SL</th>
            <th>User Group</th>
            <th>Vehicle</th>
            <th>Waiting From</th>
            <th>Waiting Time</th>
            <th>Location</th>
            <th>Lat/Long</th>
        </tr>
        @foreach (var item in Model.OrderBy(m => m.VehicleTrackingInformation.Vehicle.Depo.Name).ThenBy(m => m.VehicleTrackingInformation.VehicleTracking.EngineStatus_ChangedAt))
        {
            sl++;
            <tr>
                <td>@sl</td>
                <td>@item.Depo.Name</td>
                <td>@item.RegistrationNumber</td>
                <td>@ConvertToDateTimeString(item.VehicleTrackingInformation.VehicleTracking.Location_ChangedAt)</td>
                <td>@GetTimeDiffrence_Minute(item.VehicleTrackingInformation.VehicleTracking.Location_ChangedAt)</td>
                <td><a href="http://3rdeye.prangroup.com:7698/Report/ShowMapWithMarker?latitude=@item.VehicleTrackingInformation.VehicleTracking.Latitude&longitude=@item.VehicleTrackingInformation.VehicleTracking.Longitude" target="_blank">map</a></td>
                <td>@item.VehicleTrackingInformation.VehicleTracking.Latitude, @item.VehicleTrackingInformation.VehicleTracking.Longitude</td>
            </tr>
        }

    </table>

    <p>Autogenerated by Automation-MIS-PRG</p>

</body>
</html>


