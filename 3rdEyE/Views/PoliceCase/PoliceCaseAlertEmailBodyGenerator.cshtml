@model IEnumerable<_3rdEyE.Models.PoliceCase>

@{
    Layout = null;
}
@{
    string ConvertToDateString(DateTime? dateTime)
    {
        return String.Format("{0:dd'/'MM'/'yyyy}", dateTime);
    }
}
<!DOCTYPE html>
<html>
<head>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        /*th, td {
            padding: 15px;
        }*/
    </style>
</head>
<body style="width:50%;">

    <h2>@ViewBag.Message_1</h2>
    <p></p>

    <table>
        <tr>
            <th>User Group</th>
            <th>Vehicle</th>
            <th>Case ID</th>
            <th>Issue Date</th>
            <th>Alert Date</th>
        </tr>
        @{
            var _vehicle_Depo = "";
        }
        @foreach (var item in Model)
        {
            <tr>
                @if (item.Vehicle.Depo.Name != _vehicle_Depo)
                {
                    <td rowspan="@Model.Where(m=>m.Vehicle.Depo == item.Vehicle.Depo).Count()">@item.Vehicle.Depo.Name</td>
                    _vehicle_Depo = item.Vehicle.Depo.Name;
                }
                else
                {
                }
                <td>@item.Vehicle.RegistrationNumber</td>
                <td>@item.CaseID</td>
                <td>@ConvertToDateString(item.IssueDate)</td>
                <td>@ConvertToDateString(item.AlertDate)</td>
            </tr>
        }

    </table>

    <p>Autogenerated by Automation-MIS-PRG</p>

</body>
</html>


